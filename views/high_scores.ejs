<html>
  <%- include("includes/head") %>
  <head>
      <link rel="stylesheet"  href="/styles/css/high_scores.css">
      <link rel="stylesheet"  href="/styles/css/sudoku.css">
      <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins">
      <link rel="icon" href="icons/joystick.png" type="image/icon type">
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  </head>

    <body>
      <%- include("includes/header") %>

      <section class="main-section">

        <h1>Welcome to highscore page</h1>
        <% high_scores.forEach(high_score => {
          if (high_score.game == "solo") {
          %>
          <form method="GET" action="/sudoku/high_scores">
            <ul>
              <li>
                <span>Game ID: <%= high_score._id%></span>
              </li>
              <li>
                <span>Game mode: <%= high_score.game%></span>
              </li>
              <li>
                Total moves: <%= high_score.totalMoves%>
              </li>
              <li>
                <span>Track moves: <input class="tracker-<%= high_score._id%>" style="width: 100% !important;" type="range" min="0" max="<%=high_score.totalMoves - 1%>" value="<%= high_score.totalMoves - 1%>"></span>
              </li>
              <li>
                <div id="grid" class="grid-<%= high_score._id%>">
                  <div class="smallgrid" id="grid-0-0">
                    <input id="<%= high_score._id%>-input-0" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= high_score._id%>-input-1" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= high_score._id%>-input-2" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= high_score._id%>-input-9" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= high_score._id%>-input-10" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= high_score._id%>-input-11" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= high_score._id%>-input-18" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= high_score._id%>-input-19" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= high_score._id%>-input-20" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                  </div>
                  <div class="smallgrid" id="grid-1-0">
                    <input id="<%= high_score._id%>-input-3" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= high_score._id%>-input-4" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= high_score._id%>-input-5" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= high_score._id%>-input-12" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= high_score._id%>-input-13" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= high_score._id%>-input-14" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= high_score._id%>-input-21" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= high_score._id%>-input-22" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= high_score._id%>-input-23" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                  </div>
                  <div class="smallgrid" id="grid-2-0">
                    <input id="<%= high_score._id%>-input-6" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= high_score._id%>-input-7" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= high_score._id%>-input-8" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= high_score._id%>-input-15" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= high_score._id%>-input-16" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= high_score._id%>-input-17" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= high_score._id%>-input-24" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= high_score._id%>-input-25" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= high_score._id%>-input-26" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                  </div>
                  <div class="smallgrid" id="grid-0-1">
                    <input id="<%= high_score._id%>-input-27" type="number" min="1" max="9" maxlength="1" class="sudoku-input" >
                    <input id="<%= high_score._id%>-input-28" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= high_score._id%>-input-29" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= high_score._id%>-input-36" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= high_score._id%>-input-37" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= high_score._id%>-input-38" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= high_score._id%>-input-45" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= high_score._id%>-input-46" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= high_score._id%>-input-47" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                  </div>
                  <div class="smallgrid" id="grid-1-1">
                    <input id="<%= high_score._id%>-input-30" type="number" min="1" max="9" maxlength="1" class="sudoku-input" >
                    <input id="<%= high_score._id%>-input-31" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= high_score._id%>-input-32" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= high_score._id%>-input-39" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= high_score._id%>-input-40" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= high_score._id%>-input-41" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= high_score._id%>-input-48" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= high_score._id%>-input-49" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= high_score._id%>-input-50" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                  </div>
                  <div class="smallgrid" id="grid-2-1">
                    <input id="<%= high_score._id%>-input-33" type="number" min="1" max="9" maxlength="1" class="sudoku-input" >
                    <input id="<%= high_score._id%>-input-34" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= high_score._id%>-input-35" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= high_score._id%>-input-42" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= high_score._id%>-input-43" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= high_score._id%>-input-44" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= high_score._id%>-input-51" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= high_score._id%>-input-52" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= high_score._id%>-input-53" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    </div>
                  <div class="smallgrid" id="grid-0-2">
                    <input id="<%= high_score._id%>-input-54" type="number" min="1" max="9" maxlength="1" class="sudoku-input" >
                    <input id="<%= high_score._id%>-input-55" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= high_score._id%>-input-56" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= high_score._id%>-input-63" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= high_score._id%>-input-64" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= high_score._id%>-input-65" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= high_score._id%>-input-72" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= high_score._id%>-input-73" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= high_score._id%>-input-74" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                  </div>
                  <div class="smallgrid" id="grid-1-2">
                    <input id="<%= high_score._id%>-input-57" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= high_score._id%>-input-58" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= high_score._id%>-input-59" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= high_score._id%>-input-66" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= high_score._id%>-input-67" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= high_score._id%>-input-68" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= high_score._id%>-input-75" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= high_score._id%>-input-76" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= high_score._id%>-input-77" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                  </div>
                  <div class="smallgrid" id="grid-2-2">
                    <input id="<%= high_score._id%>-input-60" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= high_score._id%>-input-61" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= high_score._id%>-input-62" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= high_score._id%>-input-69" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= high_score._id%>-input-70" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= high_score._id%>-input-71" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= high_score._id%>-input-78" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= high_score._id%>-input-79" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= high_score._id%>-input-80" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                  </div>
                </div>
              </li>
              <li>
                <span></span>
                <span>a</span>
                <span>0</span>
                <span><img src="/styles/img/award.png"></span>
              </li>
            </ul>
          </form>
          <script>
            function prephs() {
              var currentval = document.querySelector(".tracker-<%= high_score._id%>").value;
              var hs = JSON.stringify(high_score);
              for (let i = 0; i < 81; i++) {
                //get cell
                var cell = document.getElementById("<%= high_score._id%>-input-"+i);

                //set numbers
                cell.value = hs.boardObjHistory[currentval].fullboard[i];

                //remove extra classes
                cell.classList.remove("wrong-cell");
                cell.classList.remove("correct-cell");
                cell.classList.remove("hint-cell");
                cell.classList.remove("givennumber");

              }
              for (let i = 0; i < hs.boardObjHistory[currentval].correctIndexes.length ; i++) {
                document.getElementById("<%= high_score._id%>-input-"+hs.boardObjHistory[currentval].correctIndexes[i]).classList.add("correct-cell");
              }
              for (let i = 0; i < hs.boardObjHistory[currentval].wrongIndexes.length ; i++) {
                document.getElementById("<%= high_score._id%>-input-"+hs.boardObjHistory[currentval].wrongIndexes[i]).classList.add("wrong-cell");
              }
              for (let i = 0; i < hs.boardObjHistory[currentval].givenNumberIndexes.length ; i++) {
                document.getElementById("<%= high_score._id%>-input-"+hs.boardObjHistory[currentval].givenNumberIndexes[i]).classList.add("givennumber");
              }
              for (let i = 0; i < hs.boardObjHistory[currentval].hintIndexes.length ; i++) {
                document.getElementById("<%= high_score._id%>-input-"+hs.boardObjHistory[currentval].hintIndexes[i]).classList.add("hint-cell");
              }
            }
            document.querySelector(".tracker-<%= high_score._id%>").addEventListener('input', () => {
              prephs();
            });;
            prephs();
          </script>
          <%
          }
        }); %>

      </section>

      <%- include("includes/footer") %>
    </body>
</html>
