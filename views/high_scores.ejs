<html>
  <%- include("includes/head") %>
  <head>
      <link rel="stylesheet"  href="/styles/css/high_scores.css">
      <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins">
      <link rel="icon" href="icons/joystick.png" type="image/icon type">
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  </head>

    <body>
      <%- include("includes/header") %>

      <section class="main-section">
        <div class="head">
          <h1>Singleplayer highscores and game history</h1>
          <form method="GET" action="/sudoku">
            <button class="logout" type="submit"><img src="/styles/img/exit.png">Back to menu</button>
          </form>
        </div>
        <% 
          var rank = 1;
          if (high_scores.length == 0) {
            %> 
            <h3>You need to finish at least one game to see anything here!</h3>
            <%
          }
          high_scores.forEach(high_score => {
          if (high_score.game == "solo") {
          %>
          <form method="GET" action="/sudoku/high_scores">
            <ul>
              <li>
                <div>Player: <%= high_score.username%></div>
                <div>Game mode: <%= high_score.game%></div>
                <div>Date played: <%= high_score.dateplayed%></div>
                <div>Rank: <span><%-rank++%></span><img src="/styles/img/award.png"></div>
              </li>
              <li>
                <div>Total moves: <%= high_score.totalMoves%></div>
                <div class="score">Score: <%= high_score.score%></div>
                <div>Hints used: <%= high_score.boardObjHistory[high_score.totalMoves - 1].hintIndexes.length%></div>
              </li>
              <li>
                <div id="grid" class="grid-<%= high_score._id%>">
                  <div class="smallgrid" id="grid-0-0">
                    <input id="<%= high_score._id%>-input-0" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= high_score._id%>-input-1" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= high_score._id%>-input-2" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= high_score._id%>-input-9" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= high_score._id%>-input-10" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= high_score._id%>-input-11" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= high_score._id%>-input-18" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= high_score._id%>-input-19" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= high_score._id%>-input-20" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                  </div>
                  <div class="smallgrid" id="grid-1-0">
                    <input id="<%= high_score._id%>-input-3" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= high_score._id%>-input-4" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= high_score._id%>-input-5" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= high_score._id%>-input-12" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= high_score._id%>-input-13" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= high_score._id%>-input-14" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= high_score._id%>-input-21" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= high_score._id%>-input-22" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= high_score._id%>-input-23" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                  </div>
                  <div class="smallgrid" id="grid-2-0">
                    <input id="<%= high_score._id%>-input-6" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= high_score._id%>-input-7" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= high_score._id%>-input-8" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= high_score._id%>-input-15" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= high_score._id%>-input-16" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= high_score._id%>-input-17" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= high_score._id%>-input-24" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= high_score._id%>-input-25" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= high_score._id%>-input-26" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                  </div>
                  <div class="smallgrid" id="grid-0-1">
                    <input id="<%= high_score._id%>-input-27" type="number" min="1" max="9" maxlength="1" class="sudoku-input" >
                    <input id="<%= high_score._id%>-input-28" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= high_score._id%>-input-29" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= high_score._id%>-input-36" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= high_score._id%>-input-37" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= high_score._id%>-input-38" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= high_score._id%>-input-45" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= high_score._id%>-input-46" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= high_score._id%>-input-47" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                  </div>
                  <div class="smallgrid" id="grid-1-1">
                    <input id="<%= high_score._id%>-input-30" type="number" min="1" max="9" maxlength="1" class="sudoku-input" >
                    <input id="<%= high_score._id%>-input-31" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= high_score._id%>-input-32" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= high_score._id%>-input-39" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= high_score._id%>-input-40" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= high_score._id%>-input-41" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= high_score._id%>-input-48" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= high_score._id%>-input-49" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= high_score._id%>-input-50" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                  </div>
                  <div class="smallgrid" id="grid-2-1">
                    <input id="<%= high_score._id%>-input-33" type="number" min="1" max="9" maxlength="1" class="sudoku-input" >
                    <input id="<%= high_score._id%>-input-34" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= high_score._id%>-input-35" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= high_score._id%>-input-42" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= high_score._id%>-input-43" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= high_score._id%>-input-44" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= high_score._id%>-input-51" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= high_score._id%>-input-52" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= high_score._id%>-input-53" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    </div>
                  <div class="smallgrid" id="grid-0-2">
                    <input id="<%= high_score._id%>-input-54" type="number" min="1" max="9" maxlength="1" class="sudoku-input" >
                    <input id="<%= high_score._id%>-input-55" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= high_score._id%>-input-56" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= high_score._id%>-input-63" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= high_score._id%>-input-64" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= high_score._id%>-input-65" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= high_score._id%>-input-72" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= high_score._id%>-input-73" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= high_score._id%>-input-74" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                  </div>
                  <div class="smallgrid" id="grid-1-2">
                    <input id="<%= high_score._id%>-input-57" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= high_score._id%>-input-58" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= high_score._id%>-input-59" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= high_score._id%>-input-66" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= high_score._id%>-input-67" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= high_score._id%>-input-68" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= high_score._id%>-input-75" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= high_score._id%>-input-76" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= high_score._id%>-input-77" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                  </div>
                  <div class="smallgrid" id="grid-2-2">
                    <input id="<%= high_score._id%>-input-60" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= high_score._id%>-input-61" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= high_score._id%>-input-62" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= high_score._id%>-input-69" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= high_score._id%>-input-70" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= high_score._id%>-input-71" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= high_score._id%>-input-78" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= high_score._id%>-input-79" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= high_score._id%>-input-80" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                  </div>
                </div>
              </li>
              <li>
                <div>
                  <span>Track time: <span id="time-<%= high_score._id%>"></span></span>
                </div>
                <div>
                  <span class="slider">Track moves: <span id="value-<%= high_score._id%>"></span><input class="tracker-<%= high_score._id%>" type="range" id="moves" min="0" max="<%=high_score.totalMoves - 1%>" value="<%= high_score.totalMoves - 1%>"></span>
                </div>
                <div>
                  <span>Track score: <span id="score-<%= high_score._id%>"></span></span>
                </div>
              </li>
            </ul>
          </form>
          <script>
            //PLEASE DONT MODIFY THIS FILE
            //PLEASE DONT MODIFY THIS FILE
            //PLEASE DONT MODIFY THIS FILE
            //PLEASE DONT MODIFY THIS FILE
            //PLEASE DONT MODIFY THIS FILE

            function prephs<%= high_score._id %>() {

              var currentval = document.querySelector(".tracker-<%= high_score._id%>").value;
              var hs = <%-JSON.stringify(high_score)%>;

              var movecount = document.getElementById("value-<%= high_score._id%>").innerHTML = +currentval + 1;
              var scorecount = document.getElementById("score-<%= high_score._id%>").innerHTML = hs.boardObjHistory[currentval].score;
              var timecount = document.getElementById("time-<%= high_score._id%>").innerHTML = hs.boardObjHistory[currentval].time;

              for (let i = 0; i < 81; i++) {
                //get cell
                var cell = document.getElementById("<%= high_score._id%>-input-"+i);

                //set numbers
                cell.value = hs.boardObjHistory[currentval].fullboard[i];

                cell.disabled = true;

                //remove extra classes
                cell.classList.remove("wrong-cell");
                cell.classList.remove("correct-cell");
                cell.classList.remove("hint-cell");
                cell.classList.remove("givennumber");

              }
              for (let i = 0; i < hs.boardObjHistory[currentval].correctIndexes.length ; i++) {
                document.getElementById("<%= high_score._id%>-input-"+hs.boardObjHistory[currentval].correctIndexes[i]).classList.add("correct-cell");
              }
              for (let i = 0; i < hs.boardObjHistory[currentval].wrongIndexes.length ; i++) {
                document.getElementById("<%= high_score._id%>-input-"+hs.boardObjHistory[currentval].wrongIndexes[i]).classList.add("wrong-cell");
              }
              for (let i = 0; i < hs.boardObjHistory[currentval].givenNumberIndexes.length ; i++) {
                document.getElementById("<%= high_score._id%>-input-"+hs.boardObjHistory[currentval].givenNumberIndexes[i]).classList.add("givennumber");
              }
              for (let i = 0; i < hs.boardObjHistory[currentval].hintIndexes.length ; i++) {
                document.getElementById("<%= high_score._id%>-input-"+hs.boardObjHistory[currentval].hintIndexes[i]).classList.add("hint-cell");
              }
            }

            document.querySelector(".tracker-<%= high_score._id%>").addEventListener('input', () => {
              prephs<%= high_score._id %>();
            });

            prephs<%= high_score._id %>();
          </script>
          <%
          }
        }); %>

      </section>
      <hr>
      <section class="main-section">
        <h1>Multiplayer - history</h1>
        <% 
          let rel = false;
          multi_high_scores.forEach(mhs => {
            %>
            <form method="GET">
            <ul>
              <li>
                <div>Game mode: Multiplayer</div>
                <div>Date played: <%= mhs.dateplayed%></div>
              </li>
              <li>
                Winner: <%= mhs.winner%>
              </li>
              <li>
                    <% mhs.connected_players.forEach(p => {
                      %>
                      <div style="color: <%-p.color%>;"><%-p.player%></div>
                      <%
                    });%>
              </li>
              <li>
                <% mhs.connected_players.forEach(p => {
                      %>
                
                <div id="grid" class="grid-<%= mhs._id%>-<%= p.player%>">
                  <div class="smallgrid" id="grid-0-0">
                    <input id="<%= mhs._id%>-<%= p.player%>-input-0" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= mhs._id%>-<%= p.player%>-input-1" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= mhs._id%>-<%= p.player%>-input-2" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= mhs._id%>-<%= p.player%>-input-9" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= mhs._id%>-<%= p.player%>-input-10" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= mhs._id%>-<%= p.player%>-input-11" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= mhs._id%>-<%= p.player%>-input-18" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= mhs._id%>-<%= p.player%>-input-19" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= mhs._id%>-<%= p.player%>-input-20" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                  </div>
                  <div class="smallgrid" id="grid-1-0">
                    <input id="<%= mhs._id%>-<%= p.player%>-input-3" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= mhs._id%>-<%= p.player%>-input-4" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= mhs._id%>-<%= p.player%>-input-5" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= mhs._id%>-<%= p.player%>-input-12" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= mhs._id%>-<%= p.player%>-input-13" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= mhs._id%>-<%= p.player%>-input-14" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= mhs._id%>-<%= p.player%>-input-21" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= mhs._id%>-<%= p.player%>-input-22" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= mhs._id%>-<%= p.player%>-input-23" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                  </div>
                  <div class="smallgrid" id="grid-2-0">
                    <input id="<%= mhs._id%>-<%= p.player%>-input-6" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= mhs._id%>-<%= p.player%>-input-7" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= mhs._id%>-<%= p.player%>-input-8" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= mhs._id%>-<%= p.player%>-input-15" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= mhs._id%>-<%= p.player%>-input-16" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= mhs._id%>-<%= p.player%>-input-17" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= mhs._id%>-<%= p.player%>-input-24" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= mhs._id%>-<%= p.player%>-input-25" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= mhs._id%>-<%= p.player%>-input-26" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                  </div>
                  <div class="smallgrid" id="grid-0-1">
                    <input id="<%= mhs._id%>-<%= p.player%>-input-27" type="number" min="1" max="9" maxlength="1" class="sudoku-input" >
                    <input id="<%= mhs._id%>-<%= p.player%>-input-28" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= mhs._id%>-<%= p.player%>-input-29" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= mhs._id%>-<%= p.player%>-input-36" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= mhs._id%>-<%= p.player%>-input-37" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= mhs._id%>-<%= p.player%>-input-38" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= mhs._id%>-<%= p.player%>-input-45" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= mhs._id%>-<%= p.player%>-input-46" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= mhs._id%>-<%= p.player%>-input-47" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                  </div>
                  <div class="smallgrid" id="grid-1-1">
                    <input id="<%= mhs._id%>-<%= p.player%>-input-30" type="number" min="1" max="9" maxlength="1" class="sudoku-input" >
                    <input id="<%= mhs._id%>-<%= p.player%>-input-31" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= mhs._id%>-<%= p.player%>-input-32" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= mhs._id%>-<%= p.player%>-input-39" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= mhs._id%>-<%= p.player%>-input-40" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= mhs._id%>-<%= p.player%>-input-41" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= mhs._id%>-<%= p.player%>-input-48" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= mhs._id%>-<%= p.player%>-input-49" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= mhs._id%>-<%= p.player%>-input-50" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                  </div>
                  <div class="smallgrid" id="grid-2-1">
                    <input id="<%= mhs._id%>-<%= p.player%>-input-33" type="number" min="1" max="9" maxlength="1" class="sudoku-input" >
                    <input id="<%= mhs._id%>-<%= p.player%>-input-34" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= mhs._id%>-<%= p.player%>-input-35" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= mhs._id%>-<%= p.player%>-input-42" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= mhs._id%>-<%= p.player%>-input-43" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= mhs._id%>-<%= p.player%>-input-44" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= mhs._id%>-<%= p.player%>-input-51" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= mhs._id%>-<%= p.player%>-input-52" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= mhs._id%>-<%= p.player%>-input-53" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    </div>
                  <div class="smallgrid" id="grid-0-2">
                    <input id="<%= mhs._id%>-<%= p.player%>-input-54" type="number" min="1" max="9" maxlength="1" class="sudoku-input" >
                    <input id="<%= mhs._id%>-<%= p.player%>-input-55" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= mhs._id%>-<%= p.player%>-input-56" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= mhs._id%>-<%= p.player%>-input-63" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= mhs._id%>-<%= p.player%>-input-64" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= mhs._id%>-<%= p.player%>-input-65" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= mhs._id%>-<%= p.player%>-input-72" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= mhs._id%>-<%= p.player%>-input-73" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= mhs._id%>-<%= p.player%>-input-74" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                  </div>
                  <div class="smallgrid" id="grid-1-2">
                    <input id="<%= mhs._id%>-<%= p.player%>-input-57" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= mhs._id%>-<%= p.player%>-input-58" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= mhs._id%>-<%= p.player%>-input-59" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= mhs._id%>-<%= p.player%>-input-66" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= mhs._id%>-<%= p.player%>-input-67" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= mhs._id%>-<%= p.player%>-input-68" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= mhs._id%>-<%= p.player%>-input-75" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= mhs._id%>-<%= p.player%>-input-76" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= mhs._id%>-<%= p.player%>-input-77" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                  </div>
                  <div class="smallgrid" id="grid-2-2">
                    <input id="<%= mhs._id%>-<%= p.player%>-input-60" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= mhs._id%>-<%= p.player%>-input-61" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= mhs._id%>-<%= p.player%>-input-62" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= mhs._id%>-<%= p.player%>-input-69" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= mhs._id%>-<%= p.player%>-input-70" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= mhs._id%>-<%= p.player%>-input-71" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= mhs._id%>-<%= p.player%>-input-78" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                    <input id="<%= mhs._id%>-<%= p.player%>-input-79" type="number" min="1" max="9" maxlength="1" class="sudoku-input">
                    <input id="<%= mhs._id%>-<%= p.player%>-input-80" type="number" min="1" max="9" maxlength="1" class="sudoku-input " >
                  </div>
                </div>
                
                <%
                    });%>
              </li>
              <li>
                <div>
                  <span class="slider">Track moves: <span id="value-<%= mhs._id%>"></span><input class="tracker-<%= mhs._id%>" type="range" id="moves" min="0" max="" value=""></span>
                </div>
              </li>
              <script>
                function prepremhs<%-mhs._id%>() {
                  var mhss = <%-JSON.stringify(mhs)%>;
                  var maxmoves = 0;
                  mhss.connected_players.forEach(p => {
                    if (p.boardObjArray.length > maxmoves) maxmoves = p.boardObjArray.length;
                  });
                  prepmhs<%-mhs._id%>(maxmoves);

                  let slider = document.querySelector('input.tracker-<%= mhs._id%>');
                  slider.max = maxmoves;
                  slider.value = maxmoves;
                  slider.addEventListener('input', (event) => {
                    prepmhs<%-mhs._id%>(event.target.value);
                  });

                }
                function prepmhs<%-mhs._id%>(n) {
                  document.getElementById('value-<%= mhs._id%>').innerHTML = n;
                  var mhss = <%-JSON.stringify(mhs)%>;
                  mhss.connected_players.forEach(p => {
                    if (n > p.boardObjArray.length) n = p.boardObjArray.length;
                    for (let i = 0; i < 81; i++) {
                      let cell = document.getElementById(mhss._id+"-"+p.player+"-input-"+i);
                      cell.value =  p.boardObjArray[n - 1].fullboard[i];
                      if (cell.value == 0) cell.value = '';
                      cell.className = ""
                    }
                    p.boardObjArray[n - 1].givenNumberIndexes.forEach(i => {
                      let cell = document.getElementById(mhss._id+"-"+p.player+"-input-"+i);
                      cell.classList.add("givennumber");
                    });
                    p.boardObjArray[n - 1].correctIndexes.forEach(i => {
                      let cell = document.getElementById(mhss._id+"-"+p.player+"-input-"+i);
                      cell.classList.add("correct-cell");
                    });
                    p.boardObjArray[n - 1].wrongIndexes.forEach(i => {
                      let cell = document.getElementById(mhss._id+"-"+p.player+"-input-"+i);
                      cell.classList.add("wrong-cell");
                    });
                  });

                  


                }
                prepremhs<%-mhs._id%>();
              </script>
            </ul>
          </form>
            <%
        }); %>
      </section>

      <%- include("includes/footer") %>
    </body>
</html>
